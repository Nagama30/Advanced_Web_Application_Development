<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="" />
    <meta name="keywords" content="" />
	<title>Open Source Social Network</title>
    <link rel="icon" href="{{ url_for('static', filename='images/title_pic.png') }}" type="image/png" sizes="16x16">
    
	<link rel="stylesheet" href="static/css/main.min.css">
    <link rel="stylesheet" href="static/css/style.css">
    <link rel="stylesheet" href="static/css/color.css">
    <link rel="stylesheet" href="static/css/responsive.css">

	<style>
		/* Style for the comment button */
		.btn-comment {
			background-color: #333; /* Dark color */
			color: #0cc4f7; /* White text */
			border: none; /* Remove border */
			padding: 8px 6px; /* Add padding */
			padding-top: 2px;
			font-size: 14px; /* Font size */
			font-weight: bold; /* Bold text */
			cursor: pointer; /* Pointer cursor on hover */
			border-radius: 4px; /* Rounded corners */
			transition: background-color 0.3s ease; /* Smooth transition for hover effect */
			width: auto; /* Set a fixed width */
			height: auto;
    		text-align: center; /* Center text horizontally */
			position: relative; /* Relative positioning for the button */
			top: -10px; /* Moves the button up by 10px, adjust as needed */
		}

		/* Style for the comment textarea */
		.post-comt-box textarea {
			width: 100%; /* Full width */
			padding: 10px; /* Padding inside the textarea */
			border: 1px solid #ccc; /* Light grey border */
			border-radius: 4px; /* Rounded corners */
			margin-bottom: 10px; /* Space below the textarea */
			resize: vertical; /* Allow vertical resize only */

		}

		/* Additional styling if needed */
		.post-comt-box {
			margin-top: 20px; /* Space above the comment box */
		}
	</style>
</head>
<body>
<!--<div class="se-pre-con"></div>-->
<div class="theme-layout">
	
	<div class="responsive-header">
		<div class="mh-head first Sticky">
			<span class="mh-btns-left">
				<a class="" href="#menu"><i class="fa fa-align-justify"></i></a>
			</span>
			<span class="mh-text">
				<a href="#" title="Open Source Social Network Logo" aria-label="Open Source Social Network Logo">
					<img src="{{ url_for('static', filename='images/new_logo.jpg') }}" alt="OSSN">
				</a>
			</span>
			<span class="mh-btns-right">
				<a class="fa fa-sliders" href="#shoppingbag"></a>
			</span>
		</div>		
	</div><!-- responsive header -->
	
	<div class="topbar stick">
		<div class="logo">
			<a title="" href="{{ url_for('account') }}"><img src="{{ url_for('static', filename='images/logo_new.jpg') }}" alt="OSSN" width="50" height="50"></a>
		</div>
		
		<div class="top-area">
			<ul class="main-menu">
				<li>
					<a href="#" title="">Home</a>
				</li>
				<li>
					<a href="#" title="">Project</a>
					<ul>
						<li><a href="{{ url_for('view_project') }}" title="">View Project</a></li>
						<li><a href="{{ url_for('manage_project') }}" title="">Manage Project</a></li>
						<li><a href="{{ url_for('create_project') }}" title="">Add a project</a></li>
					</ul>
				</li>
			</ul>
			<ul class="setting-area">
				<li>
					<span> Welcome <b>{{ user_name }}</b></span>
				</li>
				<li>
					<a href="#" title="Home" data-ripple=""><i class="ti-search"></i></a>
					<div class="searched">
						<form method="post" class="form-search">
							<input type="text" placeholder="Search">
							<button data-ripple><i class="ti-search"></i></button>
						</form>
					</div>
				</li>
			</ul>
			<div class="user-img">
				<img src="static/images/admin.png" alt="" width="30" height="30">
				<span class="status f-online"></span>
				<div class="user-setting">
					<a href="{{ url_for('edit_profile_basic') }}" title=""><i class="ti-pencil-alt"></i>Edit profile</a>
					<a href="{{ url_for('edit_password') }}" title=""><i class="ti-pencil-alt"></i>Change password</a>
					<a href="{{ url_for('logout') }}" title=""><i class="ti-power-off"></i>log out</a>
				</div>
			</div>
		</div>
	</div><!-- topbar -->
		
	<section>
		<div class="gap gray-bg">
			<div class="container-fluid">
				<div class="row">
					<div class="col-lg-12">
						<div class="row" id="page-contents">
							<div class="col-lg-3">
								<aside class="sidebar static">
									<div class="widget">
										<h4 class="widget-title">Shortcuts</h4>
										<ul class="naves">
											<li>
												<i class="ti-clipboard"></i>
												<a href="{{ url_for('account') }}" title="">News feed</a>
											</li>
											<li>
												<i class="ti-mouse-alt"></i>
												<a href="{{ url_for('edit_profile_basic') }}" title="">Change Profile</a>
											</li>
											<li>
												<i class="ti-image"></i>
												<a href="{{ url_for('edit_password') }}" title="">Change Password</a>
											</li>
											<li>
												<i class="ti-video-camera"></i>
												<a href="{{ url_for('create_project') }}" title="">Create a Project</a>
											</li>
											<li>
												<i class="ti-comments-smiley"></i>
												<a href="{{ url_for('manage_project') }}" title="">Manage Project</a>
											</li>
											<li>
												<i class="ti-bell"></i>
												<a href="{{ url_for('view_project') }}" title="">View Projects</a>
											</li>
										</ul>
									</div><!-- Shortcuts -->
									<div class="widget stick-widget">
										<h4 class="widget-title">Who's following</h4>
										<ul class="followers">
											{% for follower in my_followers %}
											<li>
												<figure>
													<img src="static/images/users_logo.jpg" alt="USER">
												</figure>
												<div class="friend-meta">
													<a href="#">{{ follower.user_name }}</a>
													<i><a href="mailto:{{ follower.email }}">{{ follower.email }}</a></i>
												</div>
											</li>
											{% endfor %}
										</ul>
									</div><!-- who's following -->
								</aside>
							</div><!-- sidebar -->
							<div class="col-lg-6">
								<div class="central-meta">
									<div class="new-postbox">
										<figure>
											<img src="static/images/admin.png" alt="">
										</figure>
										<div class="newpst-input">
											<form action="{{ url_for('create_post') }}" method="post">
												<textarea rows="3" name="content" id="content" required="required" placeholder="write something"></textarea>
												<div class="attachments">
													<ul>
														<li>
															<button name="post" id="post" required="required" type="submit">Post</button>
														</li>
													</ul>
												</div>
											</form>
										</div>
									</div>
								</div><!-- add post new box -->
								<div class="loadMore">
									<h3 style="text-align: center; font-weight: bold; color: rgb(0, 102, 149);">Feed</h3>
									{% for post in posts %}
									<div class="central-meta item">
										<div class="user-post">
											<div class="friend-info">
												<figure>
													<img src="images/resources/friend-avatar10.jpg" alt="">
												</figure>
												<div class="friend-name">
													<ins><a href="time-line.html" title="">{{ post.user_name }}</a></ins>
													<span>published: {{ post.timestamp.strftime('%B %d, %Y %I:%M %p') }}</span>
												</div>
												<div class="post-meta">
													<div class="description">
														<p>{{ post.content }}</p>
													</div>
												</div>
											</div>
								
											<div class="coment-area">
												<ul class="we-comet">
													<!-- Comment Form -->
													<li>
														<div class="post-comt-box">
															<form method="post" action="{{ url_for('add_comment', post_id=post.id) }}">
																<textarea name="comment" placeholder="Post your comment" required></textarea>
																<div class="add-smiles">
																	<span class="em em-expressionless" title="add icon"></span>
																</div>
																<button type="submit" class="btn-comment">Comment</button>
															</form>
														</div>
													</li>
								
													<!-- Existing Comments -->
													{% for comment in post.comments %}
													<li>
														<div class="comet-avatar">
															<img src="images/resources/comet-1.jpg" alt="">
														</div>
														<div class="we-comment">
															<div class="coment-head">
																<h5><a href="time-line.html" title="">{{ comment.user_name }}</a></h5>
																<span>{{ comment.timestamp.strftime('%B %d, %Y %I:%M %p') }}</span>
																<a class="we-reply" href="#" title="Reply"><i class="fa fa-reply"></i></a>
															</div>
															<p>{{ comment.content }}</p>
														</div>
													</li>
													{% endfor %}
												</ul>
											</div>
										</div>
									</div>
									{% endfor %}
								</div>															
							</div><!-- centerl meta -->
							<div class="col-lg-3">
								<aside class="sidebar static">
									<div class="widget">
										<h4 class="widget-title">Your Insights</h4>	
										<div class="your-page">
											<figure>
												<a href="#" title=""><img src="static/images/admin.png" alt=""></a>
											</figure>
											<div class="page-meta">
												<a href="#" title="" class="underline">My Posts</a>
											</div>
											<div class="page-likes">
												<ul class="nav nav-tabs likes-btn">
													<li class="nav-item"><a class="active" href="#link1" data-toggle="tab">likes</a></li>
													 <li class="nav-item"><a class="" href="#link2" data-toggle="tab">Comments</a></li>
												</ul>
												<!-- Tab panes -->
												<div class="tab-content">
												  <div class="tab-pane active fade show " id="link1" >
													<span><i class="ti-heart"></i>{{likes_count}}</span>
													  <a href="#" title="weekly-likes">{{likes_count}} new likes this month</a>
													  <div class="users-thumb-list">
														<a href="#" title="Anderw" data-toggle="tooltip">
															<img src="images/resources/userlist-1.jpg" alt="">  
														</a>
														<a href="#" title="frank" data-toggle="tooltip">
															<img src="images/resources/userlist-2.jpg" alt="">  
														</a>
														<a href="#" title="Sara" data-toggle="tooltip">
															<img src="images/resources/userlist-3.jpg" alt="">  
														</a>
														<a href="#" title="Amy" data-toggle="tooltip">
															<img src="images/resources/userlist-4.jpg" alt="">  
														</a>
														<a href="#" title="Ema" data-toggle="tooltip">
															<img src="images/resources/userlist-5.jpg" alt="">  
														</a>
														<a href="#" title="Sophie" data-toggle="tooltip">
															<img src="images/resources/userlist-6.jpg" alt="">  
														</a>
														<a href="#" title="Maria" data-toggle="tooltip">
															<img src="images/resources/userlist-7.jpg" alt="">  
														</a>  
													  </div>
												  </div>
												  <div class="tab-pane fade" id="link2" >
													  <span><i class="ti-eye"></i>{{comments_count}}</span>
													  <a href="#" title="weekly-likes">{{comments_count}} new comments this month</a>
													  <div class="users-thumb-list">
														<a href="#" title="Anderw" data-toggle="tooltip">
															<img src="images/resources/userlist-1.jpg" alt="">  
														</a>
														<a href="#" title="frank" data-toggle="tooltip">
															<img src="images/resources/userlist-2.jpg" alt="">  
														</a>
														<a href="#" title="Sara" data-toggle="tooltip">
															<img src="images/resources/userlist-3.jpg" alt="">  
														</a>
														<a href="#" title="Amy" data-toggle="tooltip">
															<img src="images/resources/userlist-4.jpg" alt="">  
														</a>
														<a href="#" title="Ema" data-toggle="tooltip">
															<img src="images/resources/userlist-5.jpg" alt="">  
														</a>
														<a href="#" title="Sophie" data-toggle="tooltip">
															<img src="images/resources/userlist-6.jpg" alt="">  
														</a>
														<a href="#" title="Maria" data-toggle="tooltip">
															<img src="images/resources/userlist-7.jpg" alt="">  
														</a>  
													  </div>
												  </div>
												</div>
											</div>
										</div>
									</div><!-- page like widget -->
									<div class="widget">
										<div class="banner medium-opacity bluesh">
											<div class="bg-image" style="background-image: url(images/resources/baner-widgetbg.jpg)"></div>
											<div class="baner-top">
												<span><img alt="" src="images/book-icon.png"></span>
												<i class="fa fa-ellipsis-h"></i>
											</div>
											<div class="banermeta">
												<p>
													create your own project and share ideas...
												</p>
												<span>manage it all</span>
												<a data-ripple="" title="" href="{{ url_for('create_project') }}">start now!</a>
											</div>
										</div>											
									</div>
									<div class="widget friend-list stick-widget">
										<h4 class="widget-title">Friends</h4>
										<div id="searchDir"></div>
										<ul id="people-list" class="friendz-list">
											{% for friend in friends_list %}
											<li>
												<figure>
													<img src="static/images/users_logo.jpg" alt="USER">
													<span class="status f-online"></span>
												</figure>
												<div class="friendz-meta">
													<a href="#">{{ friend.friend }}</a>
													<i><a href="mailto:{{ friend.email }}">{{ friend.email }}</a></i>
												</div>
											</li>
											{% endfor %}
										</ul>
									</div><!-- friends list sidebar -->
								</aside>
							</div><!-- sidebar -->
						</div>	
					</div>
				</div>
			</div>
		</div>	
	</section>

	<!-- Flash message section -->
    <div class="flash-messages">
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="flash-message alert alert-{{ category }}">{{ message }}</div>
                {% endfor %}
            {% endif %}
        {% endwith %}
    </div>

	<footer>
		<div class="container">
			<div class="row">
				<div class="col-lg-4 col-md-4">
					<div class="widget">
						<div class="foot-logo">
							<div class="logo">
								<a href="#" title=""><img src="/static/images/logo_new.jpg" alt="OSSN" width="50" height="50"></a>
							</div>	
							<p>
								This project aims to develop a comprehensive social media system to facilitate and enhance open contribution to projects.
							</p>
						</div>
						<ul class="location">
							<li>
								<i class="ti-map-alt"></i>
								<p>1720 University Blvd, Birmingham, AL 35294, United States</p>
							</li>
							<li>
								<i class="ti-mobile"></i>
								<p>+1-205 12-345 67</p>
							</li>
						</ul>
					</div>
				</div>
				<div class="col-lg-2 col-md-4">
					<div class="widget">
						<div class="widget-title"><h4>follow</h4></div>
						<ul class="list-style">
							<li><i class="fa fa-facebook-square"></i> <a href="https://www.facebook.com/" title="">facebook</a></li>
							<li><i class="fa fa-twitter-square"></i><a href="https://x.com/?lang=en" title="">X</a></li>
							<li><i class="fa fa-instagram"></i><a href="https://www.instagram.com/?hl=en" title="">instagram</a></li>
						</ul>
					</div>
				</div>
				<div class="col-lg-2 col-md-4">
					<div class="widget">
						<div class="widget-title"><h4>Navigate</h4></div>
						<ul class="list-style">
							<li><a href="https://www.uab.edu/home/" title="">about us</a></li>
							<li><a href="https://www.uab.edu/home/" title="">contact us</a></li>
							<li><a href="https://www.google.com/maps/place/University+of+Alabama+at+Birmingham/@33.5020367,-86.8083244,17z/data=!3m1!4b1!4m6!3m5!1s0x88891be961b81a47:0x51c659f9085bb04b!8m2!3d33.5020323!4d-86.8057495!16zL20vMDJqeXI4?entry=ttu" title="">Sitemap</a></li>
						</ul>
					</div>
				</div>
				<div class="col-lg-2 col-md-4">
					<div class="widget">
						<div class="widget-title"><h4>download apps</h4></div>
						<ul class="colla-apps">
							<li><a href="https://play.google.com/store?hl=en" title=""><i class="fa fa-android"></i>android</a></li>
							<li><a href="https://www.apple.com/lae/ios/app-store/" title=""><i class="ti-apple"></i>iPhone</a></li>
							<li><a href="https://www.microsoft.com/store/apps" title=""><i class="fa fa-windows"></i>Windows</a></li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</footer><!-- footer -->
</div>

    <script src="{{ url_for('static', filename='js/main.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>

	<script>
		document.addEventListener('DOMContentLoaded', function () {
			document.querySelectorAll('.user-setting > a').forEach(function (link) {
				link.addEventListener('click', function (event) {
					console.log('Overriding link behavior:', event.target.href);
					// Ensure the default action is allowed
					event.stopPropagation(); // Prevent other handlers from running
					// Remove any existing event listeners that might be preventing default action
					link.onclick = null;
				}, true);
			});
		});
	</script>
	<script>
		// Function to show and auto-hide flash messages
		function showFlashMessages() {
			const flashMessages = document.querySelectorAll('.flash-message');
			flashMessages.forEach(message => {
				setTimeout(() => {
					message.style.display = 'none';
				}, 5000); // 2000 milliseconds = 2 seconds
			});
		}
		window.onload = showFlashMessages;
	</script>
</body>	

</html>